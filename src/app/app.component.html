<div class="app-menu-bar px-1 py-1">

  <span class="app-menu-bar__item text-secondary mx-1" (click)="toggleMenu()">ðŸ§Š IJsblokjes</span>
  <span class="app-menu-bar__item text-secondary mx-1" (click)="toggleRightMenu()">Instellingen</span>

  <div *ngIf="isMenuOpen" class="app-overlay" (click)="toggleMenu()"></div>

  <div class="app-drawer-menu" [ngClass]="{ 'app-drawer-menu--open': isMenuOpen }">
    <button class="app-drawer-menu__item" (click)="toggleMenu()">
      <ng-icon name="letsArrowLeft" size="24" color="--primay-color" /> Terug
    </button>
  </div>

  <div *ngIf="rightMenuOpen" class="app-overlay" (click)="toggleRightMenu()"></div>

  <div class="app-settings-menu app-settings-menu--right" [ngClass]="{ 'app-settings-menu--open': rightMenuOpen }">
    <div>
      <button class="app-drawer-menu__item" (click)="toggleRightMenu()">
        Terug <ng-icon name="letsArrowRight" size="24" color="--primay-color" />
      </button>

      <form>
        <label for="textInput" hidden>Transponder</label>
        <input type="text" id="textInput" [(ngModel)]="chipInput" name="textInput"
          placeholder="Transponder, bijv. 'AB-12345'">
      </form>
      <button (click)="onClick(chipInput)">Ophalen</button>
      <span class="text-error mx-1" *ngIf="errorMessage">
        {{errorMessage}}
      </span>
    </div>
    <button (click)="clearCache()" class="btn-inverse">Cache verwijderen</button>
  </div>

</div>

<div class="app-content">
  <ng-container *ngIf="(currentActivity$ |async ) as currentActivity">
    <activitystats [currentActivity]="currentActivity" (nextActivity)="selectNextActivity()"
      (prevActivity)="selectPrevActivity()" />

    <div class="px-1 py-1">
      <div id="bar-chart" class="card">
        <div class="card-header">
          <h2>Rondetijden (s)</h2>
        </div>
        <lap-barchart [laps]="currentActivity.laps" />
      </div>
    </div>

    <div class="px-1 py-1">
      <div id="bar-chart" class="card">
        <div class="card-header">
          <h2 class="text-secondary">Snelheid (km/u) per ronde</h2>
        </div>
        <speed-barchart [laps]="currentActivity.laps ||[]" />
      </div>
    </div>

    <ng-container *ngIf="(allActivities$ | async ) as allActivities">
      <activitieslist [allActivities]="allActivities" [currentActivity]="currentActivity"
        (selectActivity)="handleAct($event)" />
    </ng-container>
  </ng-container>
</div>